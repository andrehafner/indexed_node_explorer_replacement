# Docker Compose override for MULTI-NODE fetching
#
# Usage:
#   docker-compose -f docker-compose.yml -f docker-compose.multi-node.yml up -d
#
# IMPORTANT: The FIRST node in ERGO_NODES is used for wallet operations.
# If you need wallet functionality, put your node with the wallet first,
# followed by other nodes for parallel sync.
#
# Example:
#   ERGO_NODES=http://my-wallet-node:9053,http://sync-node-1:9053,http://sync-node-2:9053

version: "3.8"

services:
  ergo-index:
    environment:
      # Multiple nodes for parallel fetching (comma-separated)
      # FIRST NODE = wallet operations, ALL NODES = block syncing
      - ERGO_NODES=http://128.253.41.100:9053,http://128.253.41.101:9053,http://128.253.41.102:9053
      # Keep batch size reasonable to avoid overwhelming nodes
      # With 3 nodes, 10 blocks = ~3-4 requests per node per batch
      - SYNC_BATCH_SIZE=10
